# MD Tasks - v0.2 要件定義書

## 概要

v0.1のMVP機能をベースに、UI操作を拡充してユーザビリティを向上させる。

---

## 機能一覧

### 1. UIからのソート切り替え

#### 概要

WebView UIからソート方式（sortBy）を切り替えられるようにする。

#### 仕様

- **UI配置**: ツールバーにドロップダウンを配置
- **選択肢**: `markdown`（元の順序）/ `priority`（優先度順）/ `due`（期限順）/ `alphabetical`（アルファベット順）
- **永続化**: フロントマターに保存
  - フロントマターに`sortBy`フィールドを追加
  - 優先順位: フロントマター > VSCode設定 > デフォルト値

#### フロントマター例

```yaml
---
statuses: [todo, in-progress, done]
sortBy: priority
---
```

---

### 2. パスによる絞込み

見出しパス（グルーピング）でタスクをフィルタリングできるようにする。特定のプロジェクトやカテゴリのタスクのみを表示可能にする。

> **TODO**: 詳細仕様を検討

---

### 3. フォームからのpriority入力

タスク編集フォームにpriorityフィールドを追加する。優先度の入力方式（数値 or ラベル）は要検討。

> **TODO**: 詳細仕様を検討

---

### 4. UIからのstatus追加

ボード上で新しいステータス（カラム）を追加できるようにする。追加されたステータスはフロントマターまたは設定に反映される。

> **TODO**: 詳細仕様を検討

---

### 5. Ctrl+Sによる保存

WebView上でCtrl+S（macOSではCmd+S）を押すと、即座にMarkdownファイルを保存する。現状の自動保存との共存方法は要検討。

> **TODO**: 詳細仕様を検討

---

### 6. Kanbanロック機能

#### 概要

アクティブエディタ切り替え時のKanbanパネルの挙動を制御できるようにする。VSCode標準のMarkdown Previewと同様のハイブリッドアプローチを採用。

#### 仕様

- **デフォルト動作**: アクティブなMarkdownファイルに自動追従（追従モード）
- **ロック機能**: 特定のファイルにKanbanパネルを固定できる（ロックモード）
- **コマンド**:
  - `MD Tasks: Toggle Kanban Locking` - ロック状態の切り替え
  - `MD Tasks: Open Locked Kanban to Side` - 最初からロック状態で開く
- **UI表示**: WebView上にロック状態を示すアイコン（🔒/🔓）を表示

#### ユースケース

- **追従モード**: 複数のMarkdownファイルを切り替えながら、それぞれのKanbanを確認
- **ロックモード**: 他のドキュメントを参照しながら、特定ファイルのKanbanをベースに作業
